generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id       Int     @id @default(autoincrement())
  name     String
  cpf      String  @unique
  password String
  role     String
  phone    String?
  wallet   Wallet?
  trips    Trip[]
}

model Wallet {
  id        Int   @id @default(autoincrement())
  driverId  Int   @unique
  balance   Float @default(0)
  threshold Float @default(100)
  user      User  @relation(fields: [driverId], references: [id])
}

model Trip {
  id              Int       @id @default(autoincrement())
  driverId        Int
  driver          User      @relation(fields: [driverId], references: [id])

  driverName      String
  driverCPF       String
  driverPhone     String?

  departDepotAt       DateTime?
  arriveFactoryAt     DateTime?
  loadStartAt         DateTime?
  loadEndAt           DateTime?
  leaveFactoryAt      DateTime?
  arriveDepotAt       DateTime?

  startLat        Float?
  startLng        Float?
  endLat          Float?
  endLng          Float?

  totalTripHours       Float?
  travelToFactoryHours Float?
  waitBeforeLoadHours  Float?
  loadingHours         Float?
  postLoadHours        Float?
  returnHours          Float?

  diarias        Int?
  refeicoes      Int?
  valorFinal     Float?

  status         String    @default("pending")
  createdAt      DateTime  @default(now())
}

